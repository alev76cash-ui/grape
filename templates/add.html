{% extends "base.html" %}

{% block title %}üçá –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–æ—Ä—Ç –≤–∏–Ω–æ–≥—Ä–∞–¥–∞{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card shadow-lg border-0">
            <div class="card-header bg-success text-white py-3">
                <h2 class="h4 mb-0">
                    <i class="fas fa-plus-circle me-2"></i>
                    –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–æ—Ä—Ç –≤–∏–Ω–æ–≥—Ä–∞–¥–∞
                </h2>
            </div>
            <div class="card-body p-4">
                <form method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
                    <div class="row">
                        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
                        <div class="col-md-6">
                            <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
                            <div class="mb-3">
                                <label for="name" class="form-label">
                                    <i class="fas fa-tag text-primary me-1"></i>
                                    –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ—Ä—Ç–∞ *
                                </label>
                                <input type="text"
                                       class="form-control"
                                       id="name"
                                       name="name"
                                       required
                                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –õ–æ—Ä–∞">
                                <div class="invalid-feedback">
                                    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ—Ä—Ç–∞.
                                </div>
                            </div>

                            <!-- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ -->
                            <div class="mb-3">
                                <label for="purpose" class="form-label">
                                    <i class="fas fa-wine-glass-alt text-info me-1"></i>
                                    –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
                                </label>
                                <select class="form-select" id="purpose" name="purpose">
                                    <option value="–°—Ç–æ–ª–æ–≤—ã–π">–°—Ç–æ–ª–æ–≤—ã–π</option>
                                    <option value="–í–∏–Ω–Ω—ã–π">–í–∏–Ω–Ω—ã–π</option>
                                    <option value="–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π">–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π</option>
                                </select>
                            </div>

                            <!-- –°—Ä–æ–∫ —Å–æ–∑—Ä–µ–≤–∞–Ω–∏—è -->
                            <div class="mb-3">
                                <label for="ripening_period" class="form-label">
                                    <i class="fas fa-calendar-alt text-warning me-1"></i>
                                    –°—Ä–æ–∫ —Å–æ–∑—Ä–µ–≤–∞–Ω–∏—è
                                </label>
                                <input type="text"
                                       class="form-control"
                                       id="ripening_period"
                                       name="ripening_period"
                                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û—á–µ–Ω—å —Ä–∞–Ω–Ω–∏–π/95-105 –¥–Ω–µ–π">
                            </div>

                            <!-- –ú–æ—Ä–æ–∑–æ—Å—Ç–æ–π–∫–æ—Å—Ç—å -->
                            <div class="mb-3">
                                <label for="frost_resistance" class="form-label">
                                    <i class="fas fa-snowflake text-info me-1"></i>
                                    –ú–æ—Ä–æ–∑–æ—Å—Ç–æ–π–∫–æ—Å—Ç—å
                                </label>
                                <input type="text"
                                       class="form-control"
                                       id="frost_resistance"
                                       name="frost_resistance"
                                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: -22¬∞C">
                            </div>

                            <!-- –¶–≤–µ—Ç —è–≥–æ–¥ -->
                            <div class="mb-3">
                                <label for="berry_color" class="form-label">
                                    <i class="fas fa-palette text-danger me-1"></i>
                                    –¶–≤–µ—Ç —è–≥–æ–¥
                                </label>
                                <select class="form-select" id="berry_color" name="berry_color">
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç...</option>
                                    <option value="–ë–µ–ª—ã–π">–ë–µ–ª—ã–π</option>
                                    <option value="–ó–µ–ª–µ–Ω—ã–π">–ó–µ–ª–µ–Ω—ã–π</option>
                                    <option value="–†–æ–∑–æ–≤—ã–π">–†–æ–∑–æ–≤—ã–π</option>
                                    <option value="–ö—Ä–∞—Å–Ω—ã–π">–ö—Ä–∞—Å–Ω—ã–π</option>
                                    <option value="–°–∏–Ω–∏–π">–°–∏–Ω–∏–π</option>
                                    <option value="–¢—ë–º–Ω–æ-—Å–∏–Ω–∏–π">–¢—ë–º–Ω–æ-—Å–∏–Ω–∏–π</option>
                                    <option value="–§–∏–æ–ª–µ—Ç–æ–≤—ã–π">–§–∏–æ–ª–µ—Ç–æ–≤—ã–π</option>
                                    <option value="–ß—ë—Ä–Ω—ã–π">–ß—ë—Ä–Ω—ã–π</option>
                                </select>
                            </div>
                        </div>

                        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
                        <div class="col-md-6">
                            <!-- –°–∞—Ö–∞—Ä -->
                            <div class="mb-3">
                                <label for="sugar_content" class="form-label">
                                    <i class="fas fa-candy-cane text-warning me-1"></i>
                                    –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–∞—Ö–∞—Ä–∞
                                </label>
                                <input type="text"
                                       class="form-control"
                                       id="sugar_content"
                                       name="sugar_content"
                                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 18-22%">
                            </div>

                            <!-- –ö–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å -->
                            <div class="mb-3">
                                <label for="acidity" class="form-label">
                                    <i class="fas fa-lemon text-success me-1"></i>
                                    –ö–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å
                                </label>
                                <input type="text"
                                       class="form-control"
                                       id="acidity"
                                       name="acidity"
                                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 6-7 –≥/–ª">
                            </div>

                            <!-- –í–∫—É—Å -->
                            <div class="mb-3">
                                <label for="taste" class="form-label">
                                    <i class="fas fa-utensils text-primary me-1"></i>
                                    –í–∫—É—Å
                                </label>
                                <textarea class="form-control"
                                          id="taste"
                                          name="taste"
                                          rows="3"
                                          placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∫—É—Å–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—Å–ª–∞–¥–∫–∏–π, –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π, —Å –º—É—Å–∫–∞—Ç–Ω—ã–º –æ—Ç—Ç–µ–Ω–∫–æ–º –∏ —Ç.–¥.)"></textarea>
                            </div>

                            <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                            <div class="mb-3">
                                <label for="image" class="form-label">
                                    <i class="fas fa-image text-success me-1"></i>
                                    –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ä—Ç–∞
                                </label>
                                <input type="file"
                                       class="form-control"
                                       id="image"
                                       name="image"
                                       accept=".png,.jpg,.jpeg,.gif,.webp">
                                <div class="form-text">
                                    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PNG, JPG, JPEG, GIF, WebP. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 16MB.
                                </div>
                            </div>

                            <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                            <div class="alert alert-info mt-3">
                                <i class="fas fa-info-circle me-2"></i>
                                –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
                            </div>
                        </div>
                    </div>

                    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="{{ url_for('admin_home') }}" class="btn btn-outline-secondary">
                            <i class="fas fa-arrow-left me-2"></i>–ù–∞–∑–∞–¥
                        </a>
                        <button type="submit" class="btn btn-success px-4">
                            <i class="fas fa-save me-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Ä—Ç
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ -->
        <div class="card border-0 bg-light mt-4">
            <div class="card-body">
                <h5 class="card-title text-dark">
                    <i class="fas fa-lightbulb text-warning me-2"></i>
                    –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é:
                </h5>
                <ul class="mb-0 text-dark">
                    <li><strong>–ù–∞–∑–≤–∞–Ω–∏–µ</strong> - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º</li>
                    <li><strong>–°—Ä–æ–∫ —Å–æ–∑—Ä–µ–≤–∞–Ω–∏—è</strong> - –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ –¥–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–û—á–µ–Ω—å —Ä–∞–Ω–Ω–∏–π/95-105 –¥–Ω–µ–π")</li>
                    <li><strong>–ú–æ—Ä–æ–∑–æ—Å—Ç–æ–π–∫–æ—Å—Ç—å</strong> - —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –¶–µ–ª—å—Å–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: "-22¬∞C")</li>
                    <li><strong>–í–∫—É—Å</strong> - –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
(function () {
    'use strict'
    var forms = document.querySelectorAll('.needs-validation')
    Array.prototype.slice.call(forms).forEach(function (form) {
        form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
            }
            form.classList.add('was-validated')
        }, false)
    })
})()

// –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
const imageInput = document.getElementById('image');
const imagePreview = document.getElementById('imagePreview');

if (imageInput) {
    imageInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                if (!imagePreview) {
                    // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
                    const previewContainer = document.createElement('div');
                    previewContainer.id = 'imagePreview';
                    previewContainer.className = 'mt-3 text-center';

                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'img-fluid rounded shadow';
                    img.style.maxHeight = '200px';

                    previewContainer.appendChild(img);
                    imageInput.parentNode.appendChild(previewContainer);
                } else {
                    imagePreview.querySelector('img').src = e.target.result;
                }
            }
            reader.readAsDataURL(file);
        }
    });
}
</script>
{% endblock %}
